{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getStorage } from \"firebase/storage\";\nimport { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\nimport { v4 } from \"uuid\";\nimport { addCollectionAndDocuments } from \"./postToFirestore.utils\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDfBhAMiVeEGR_79hy8WcOyOLAefCvTSlE\",\n  authDomain: \"womeninpoliticsforumsite.firebaseapp.com\",\n  projectId: \"womeninpoliticsforumsite\",\n  storageBucket: \"womeninpoliticsforumsite.appspot.com\",\n  messagingSenderId: \"304906877555\",\n  appId: \"1:304906877555:web:b79ecaf0327678847b0806\",\n  measurementId: \"G-W16E91HVYN\"\n};\nconst app = initializeApp(firebaseConfig);\nconst Storage = getStorage(app);\nexport const uploadDocWithImage = (fileToUpload, CollectionKey, docKey, docToAdd, mergeStatus) => {\n  const fileRef = ref(Storage, `wipf/images/${fileToUpload.name + v4()}`);\n  const uploadTask = uploadBytesResumable(fileRef, fileToUpload);\n  uploadTask.on(\"state_changed\", snapshot => {}, error => {\n    console.log(\"Error in image upload\", error);\n  }, () => {\n    getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n      docToAdd[\"image\"] = downloadURL;\n      addCollectionAndDocuments(CollectionKey, docKey, docToAdd, mergeStatus);\n    });\n  });\n};","map":{"version":3,"names":["initializeApp","getStorage","getDownloadURL","ref","uploadBytesResumable","v4","addCollectionAndDocuments","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","Storage","uploadDocWithImage","fileToUpload","CollectionKey","docKey","docToAdd","mergeStatus","fileRef","name","uploadTask","on","snapshot","error","console","log","then","downloadURL"],"sources":["C:/xampp/htdocs/mysites/wipf/src/firestore/uploadImage.utils.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport {getStorage} from \"firebase/storage\";\r\nimport {getDownloadURL, ref, uploadBytesResumable} from \"firebase/storage\";\r\nimport {v4} from \"uuid\";\r\nimport { addCollectionAndDocuments } from \"./postToFirestore.utils\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDfBhAMiVeEGR_79hy8WcOyOLAefCvTSlE\",  \r\n    authDomain: \"womeninpoliticsforumsite.firebaseapp.com\",  \r\n    projectId: \"womeninpoliticsforumsite\",  \r\n    storageBucket: \"womeninpoliticsforumsite.appspot.com\",  \r\n    messagingSenderId: \"304906877555\",  \r\n    appId: \"1:304906877555:web:b79ecaf0327678847b0806\",  \r\n    measurementId: \"G-W16E91HVYN\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst Storage = getStorage(app);\r\n\r\nexport const uploadDocWithImage = (fileToUpload, CollectionKey, docKey, docToAdd, mergeStatus) => {\r\n    const fileRef = ref(Storage, `wipf/images/${fileToUpload.name + v4()}`);\r\n    const uploadTask = uploadBytesResumable(fileRef, fileToUpload)\r\n        uploadTask.on(\"state_changed\", (snapshot) => {}, (error) => {\r\n            console.log(\"Error in image upload\", error)\r\n        }, ()=>{\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n                docToAdd[\"image\"] = downloadURL;\r\n                addCollectionAndDocuments(CollectionKey, docKey, docToAdd, mergeStatus);\r\n            });\r\n        })\r\n}\r\n\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAAQC,UAAU,QAAO,kBAAkB;AAC3C,SAAQC,cAAc,EAAEC,GAAG,EAAEC,oBAAoB,QAAO,kBAAkB;AAC1E,SAAQC,EAAE,QAAO,MAAM;AACvB,SAASC,yBAAyB,QAAQ,yBAAyB;AAEnE,MAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,0CAA0C;EACtDC,SAAS,EAAE,0BAA0B;EACrCC,aAAa,EAAE,sCAAsC;EACrDC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACnB,CAAC;AAED,MAAMC,GAAG,GAAGf,aAAa,CAACO,cAAc,CAAC;AACzC,MAAMS,OAAO,GAAGf,UAAU,CAACc,GAAG,CAAC;AAE/B,OAAO,MAAME,kBAAkB,GAAG,CAACC,YAAY,EAAEC,aAAa,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,KAAK;EAC9F,MAAMC,OAAO,GAAGpB,GAAG,CAACa,OAAO,EAAG,eAAcE,YAAY,CAACM,IAAI,GAAGnB,EAAE,EAAG,EAAC,CAAC;EACvE,MAAMoB,UAAU,GAAGrB,oBAAoB,CAACmB,OAAO,EAAEL,YAAY,CAAC;EAC1DO,UAAU,CAACC,EAAE,CAAC,eAAe,EAAGC,QAAQ,IAAK,CAAC,CAAC,EAAGC,KAAK,IAAK;IACxDC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEF,KAAK,CAAC;EAC/C,CAAC,EAAE,MAAI;IACH1B,cAAc,CAACuB,UAAU,CAACE,QAAQ,CAACxB,GAAG,CAAC,CAAC4B,IAAI,CAAEC,WAAW,IAAK;MAC1DX,QAAQ,CAAC,OAAO,CAAC,GAAGW,WAAW;MAC/B1B,yBAAyB,CAACa,aAAa,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,CAAC;IAC3E,CAAC,CAAC;EACN,CAAC,CAAC;AACV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}